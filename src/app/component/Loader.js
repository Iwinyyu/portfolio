"use client";
import { useEffect, Fragment } from "react";
import anime from "animejs/lib/anime.es.js";

export default function Loader({ finishLoading }) {
  const onfinish = () => {
    document.body.style.position = "";
    finishLoading(false);
  };
  const animate = () => {
    const loader = anime.timeline({
      duration: 4000,
      complete: () => onfinish(),
    });

    loader
      .add({
        targets: ".loader",
        duration: 200,
        easing: "easeInOutQuart",
        opacity: 1,
        zIndex: -1,
      })
      .add({
        targets: " .path1 ",
        delay: 200,
        duration: 1500,
        easing: "easeInOutQuart",
        strokeDashoffset: [anime.setDashoffset, 0],
      })
      .add(
        {
          targets: " .path2 ",
          delay: 200,
          duration: 1500,
          easing: "easeInOutQuart",
          strokeDashoffset: [anime.setDashoffset, 0],
        },
        400
      )
      .add(
        {
          targets: " .path3 ",
          delay: 200,
          duration: 1800,
          easing: "easeInOutQuart",
          strokeDashoffset: [anime.setDashoffset, 0],
        },
        600
      );
  };

  useEffect(() => {
    document.body.style.position = "fixed";
    const timeout = setTimeout(() => {}, 10);
    animate();
    return () => clearTimeout(timeout);
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);
  return (
    <Fragment>
      <div className="z-50 fixed h-screen w-screen bg-dark-color flex items-center justify-center">
        <svg
          width="600"
          height="600"
          viewBox="0 0 600 600"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="loader"
        >
          <g clipPath="url(#clip0_304_9)">
            <path
              className="path1"
              d="M277.047 264.75V333H263.031V264.75H277.047ZM298.281 264.75L312.531 295.875L326.781 264.75H342.109L319.656 308.156V333H305.406V308.156L282.906 264.75H298.281Z"
              fill="#FFF455"
            />
            <path
              className="path1 name"
              d="M300 83.9999C326.59 143.722 383.218 76.67 426.962 125.252C460.668 162.687 504.549 182.886 505.428 233.252C506.534 296.616 560.312 335.061 505.428 366.748C471.329 386.435 420.124 435.972 426.962 474.748C438.314 539.128 362.841 497.98 300 516C261.19 527.128 210.472 489.872 173.038 474.748C113.352 450.633 147.94 402.745 94.5718 366.748C53.639 339.138 71.3922 276.847 94.5718 233.252C117.282 190.541 148.124 166.717 173.038 125.252C202.588 76.0733 276.664 31.5863 300 83.9999Z"
              stroke="#FFF455"
              strokeWidth="20"
            />
            <path
              className="path2"
              d="M300 132C331.749 115.119 370.413 186.223 398.748 164.085C419.203 148.104 448.807 224.56 459.777 248.085C475.396 281.58 488.499 328.657 459.777 351.915C436.496 370.768 426.324 424.209 398.748 435.915C365.649 449.964 312.298 434.211 300 468C283.598 513.065 247.785 447.517 201.252 435.915C165.392 426.974 176.904 347.411 140.222 351.915C95.6002 357.394 174.152 277.58 140.222 248.085C111.576 223.183 166.851 180.126 201.252 164.085C245.623 143.395 256.773 154.984 300 132Z"
              stroke="#FFF455"
              strokeWidth="20"
            />
            <path
              className="path3"
              d="M300 204C313.159 225.059 336.859 207.046 356.427 222.334C373.632 235.776 369.681 267.296 391.301 270.334C419.854 274.347 416.759 316.129 391.301 329.665C365.844 343.202 385.221 379.174 356.427 377.665C331.629 376.366 316.292 377.258 300 396C288.957 408.704 259.287 371.633 243.573 377.665C228.791 383.339 219.497 341.245 208.699 329.665C197.901 318.086 197.7 281.723 208.699 270.334C227.338 251.032 231.81 246.451 243.573 222.334C256.212 196.419 284.721 179.548 300 204Z"
              stroke="#FFF455"
              strokeWidth="20"
            />
          </g>
        </svg>
        {/* <svg
            viewBox="0 0 600 600"
            width="600"
            height="600"
            xmlns="http://www.w3.org/2000/svg"
            className="w-[600px] h-[600px] fill-yellow-color flex items-center justify-center"
          >
            <g transform="translate(300 300)">
              <path
                d=" M 0 -216 C 26.589934352533078 -156.27802962851172 83.21798037899023 -223.32989827853174 126.96161449517417 -174.74767078498866 C 160.66828951597523 -137.31261567360647 204.54906287067843 -117.11383399836154 205.42820751975316 -66.74767078498864 C 206.5342334525125 -3.383487534582656 260.3115589049066 35.06075308874145 205.42820751975316 66.74767078498864 C 171.32946582542624 86.4345884812358 120.12441973150983 135.97201242463376 126.96161449517417 174.74767078498866 C 138.31366187817872 239.12833072366095 62.84136387938158 197.98052887279707 0 216 C -38.80982148092361 227.12853723177793 -89.5276461723163 189.87197572450575 -126.96161449517417 174.74767078498866 C -186.64799532763496 150.63280760348968 -152.0598792899018 102.74506270566545 -205.42820751975316 66.74767078498866 C -246.36097216127888 39.13817241637304 -228.60781918220079 -23.153161674972942 -205.42820751975316 -66.74767078498871 C -182.71806742009142 -109.45923230214555 -151.87598155174032 -133.28320087699595 -126.96161449517422 -174.74767078498863 C -97.41190476441761 -223.9266463993003 -23.336041207926666 -268.4136067103475 0 -216"
                fill="transparent"
                stroke="rgba(255,244,85,1)"
                strokeWidth="20"
                visibility="visible"
                className="path1"
              ></path>
              <path
                d=" M 0 -168 C 31.74852408080154 -184.88098969509377 70.41308282143461 -113.77725217449779 98.7479223851355 -135.91485505499116 C 119.20265441276916 -151.89584318222796 148.8074118366554 -75.4402737545999 159.77749473758578 -51.914855054991165 C 175.39637851766386 -18.420050697979278 188.49881028641764 28.6567923111916 159.77749473758578 51.914855054991165 C 136.4962009189527 70.76767506144186 126.32387982114491 124.20955559053715 98.7479223851355 135.91485505499116 C 65.64893582841144 149.9645412903808 12.29816451657636 134.2110706899683 0 168 C -16.402406236484417 213.0652407594626 -52.21503541201571 147.5168068305266 -98.7479223851355 135.91485505499116 C -134.60755636921934 126.9740441310521 -123.09554227060698 47.41087762827195 -159.77749473758578 51.91485505499118 C -204.39981641769515 57.393787228951574 -125.84769348041388 -22.42012880539138 -159.77749473758578 -51.91485505499122 C -188.42432893319827 -76.81716810165753 -133.14903452918404 -119.87335301317242 -98.7479223851355 -135.91485505499116 C -54.37742458368382 -156.60515797595764 -43.226842787967584 -145.01587998868965 0 -168"
                fill="transparent"
                stroke="rgba(255,244,85,1)"
                strokeWidth="20"
                visibility="visible"
                className="path2"
              ></path>
              <path
                d=" M 0 -96 C 13.159387440479023 -74.94057789797229 36.85885838250523 -92.95423942881541 56.427384220077414 -77.66563145999496 C 73.63187779682943 -64.22400791715147 69.68108529619956 -32.70417212782839 91.30142556433474 -29.665631459994948 C 119.85364231366091 -25.652879085441047 116.75929080848101 16.129444399715418 91.30142556433474 29.665631459994948 C 65.84356032018846 43.201818520274486 85.22068557818915 79.17462444240097 56.427384220077414 77.66563145999496 C 31.62860100098397 76.36598230256072 16.291792974922334 77.25843606466415 0 96 C -11.043320742998283 108.70388729355366 -40.71259693171756 71.63328980176188 -56.427384220077414 77.66563145999496 C -71.20859108194006 83.33960516868272 -80.50347120130473 41.245019851182846 -91.30142556433474 29.665631459994962 C -102.09937992736475 18.086243068807086 -102.29982353911235 -18.276456953979938 -91.30142556433474 -29.665631459994984 C -72.66178551450815 -48.9675437697352 -68.19011642321644 -53.54845643643057 -56.42738422007744 -77.66563145999494 C -43.7879097233603 -103.58039457615764 -15.279064497411841 -120.45161448665341 0 -96"
                fill="transparent"
                stroke="rgba(255,244,85,1)"
                strokeWidth="20"
                visibility="visible"
                className="path3"
              ></path>
            </g>
              <path
                d="M14.0469 0.75V69H0.03125V0.75H14.0469ZM35.2812 0.75L49.5312 31.875L63.7812 0.75H79.1094L56.6562 44.1562V69H42.4062V44.1562L19.9062 0.75H35.2812Z"
                fill="#FFF455"
                className="absolute bg-red-400"
              />
          </svg> */}
      </div>
    </Fragment>
  );
}
